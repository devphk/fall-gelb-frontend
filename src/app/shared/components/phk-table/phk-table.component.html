

<table mat-table 
       #table 
       [dataSource]="dataSource"
       class="w-100">

    <div *ngFor="let column of columnsToDisplay; let columnIndex=index">

      <ng-container [matColumnDef]="column">
        
          <!-- Checkbox column definition  -->

          <div *ngIf="column === 'select'">

            <th mat-header-cell *matHeaderCellDef>
              <mat-checkbox (change)="$event ? masterToggle() : null"
                            [checked]="selection.hasValue() && isAllSelected()"
                            [indeterminate]="selection.hasValue() && !isAllSelected()"
                            color="primary">
              </mat-checkbox>
            </th>
            <td mat-cell *matCellDef="let element, let index = index"> 
              <mat-checkbox color="primary"
                            (click)="$event.stopPropagation()"
                            (change)="$event ? selection.toggle(element) : null; $event ? updateCheckedList($event, element) : null"
                            [checked]="selection.isSelected(element)">
              </mat-checkbox>
            </td>
            
          </div>

          <!-- Another columns -->

          <div *ngIf="column !== 'select'">

            <th mat-header-cell 
                *matHeaderCellDef>
              <div>
                <span mat-sort-header>{{ column }}</span>
              </div>
            </th>
    
            <td mat-cell *matCellDef="let element, let rowIndex = index">
              {{element[columnsTags[columnIndex]]}}
            </td>

          </div>


      </ng-container>

    </div>

    <tr mat-header-row 
        *matHeaderRowDef="columnsToDisplay"></tr>
    <tr mat-row *matRowDef="let row; columns: columnsToDisplay;"></tr>


    <!-- <ng-container matColumnDef="UserName">
        <th mat-header-cell 
            *matHeaderCellDef>
          <div>
            <span mat-sort-header>Username</span>
            <template-input [formControl]="nameFilter">
            </template-input>
          </div>
        </th>
        <td mat-cell *matCellDef="let element, let index = index">
          {{element.userName}}
        </td>
      </ng-container> -->

</table>
  